/*
 * LEO JS code for LEO CDP - version 0.9.1 - built on 2025.10.16
 */

'use strict';(function(){var n=window.leoObserverId;if("undefined"===typeof window.LeoObserverProxy&&"string"===typeof n){var t=location.protocol+"//"+location.hostname,m="https://"+window.leoObserverLogDomain,u="https://"+window.leoObserverLogDomain+"/public/html/leo-event-proxy.html#";window.srcTouchpointUrl||encodeURIComponent(location.href);var c={synchLeoVisitorCallback:!1};window.LeoObserverProxy=c;window.LeoIframeProxy=!1;setTimeout(function(){if(null==document.getElementById("leotech_event_proxy")){var a=
u+window.leoObserverLogDomain+"_"+t;if("string"===typeof window.injectedVisitorId)a=a+"_"+window.injectedVisitorId;else if(0<location.search.indexOf("leosyn\x3d")){var b=location.search.substring(1);b=JSON.parse('{"'+decodeURI(b).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}').leosyn||"";a=a+"_"+b}b=document.createElement("iframe");b.setAttribute("style","display:none!important;width:0px!important;height:0px!important;");b.width=0;b.height=0;b.id="leotech_event_proxy";b.name="leotech_event_proxy";
b.src=a;a=document.getElementsByTagName("body");0<a.length&&(a[0].appendChild(b),window.LeoIframeProxy=b)}},800);var f=function(a){window.LeoIframeProxy&&window.LeoIframeProxy.contentWindow.postMessage(a,m)};c.messageHandler=function(a){"LeoObserverProxyLoaded"===a?(a=JSON.stringify({call:"getContextSession",params:g(!1)}),f(a),console.log("LeoObserverProxy.initLeoContextSession")):"LeoObserverProxyReady"===a?(a=window.leoObserverProxyReady,"function"===typeof a&&a()):0===a.indexOf("synchLeoVisitorId")&&
"function"===typeof c.synchLeoVisitorCallback&&c.synchLeoVisitorCallback(a.substring(18))};(function(a,b,e){a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent&&a.attachEvent("on"+b,e)})(window,"message",function(a){console.log(" bindEvent.onmessage \x3d\x3d\x3d\x3e e.origin "+a.origin+" targetPostMessage "+m+" data "+a.data);a.origin===m&&c.messageHandler(a.data)});var g=function(a,b,e,h,k,l,p,q){var d=encodeURIComponent(document.referrer),v=r(document.referrer),w=window.srcTouchpointName||
encodeURIComponent(document.title),x=r(document.location.href),y=window.srcTouchpointUrl||encodeURIComponent(document.location.href);d={obsid:n,mediahost:x,tprefurl:d,tprefdomain:v,tpurl:y,tpname:w};"string"===typeof a&&"object"===typeof b&&(d.metric=a,d.eventdata=encodeURIComponent(JSON.stringify(b)));"object"===typeof e&&(d.profiledata=JSON.stringify(e));"object"===typeof h&&(d.extData=JSON.stringify(h));"object"===typeof l&&(d.tsid="string"===typeof k?k:"",d.scitems=JSON.stringify(l),d.tsval="number"===
typeof p?p:0,d.tscur="string"===typeof q?q:"USD");return d},r=function(a){try{var b=(new URL(a)).hostname.split(".");return b.slice(-1*(b.length-1)).join(".")}catch(e){}return""};c.synchLeoVisitorId=function(a){c.synchLeoVisitorCallback=a;a=JSON.stringify({call:"synchLeoVisitorId"});f(a)};c.recordViewEvent=function(a,b){"object"!==typeof b&&(b={});a=g(a,b);a=JSON.stringify({call:"doTracking",params:a,eventType:"view"});f(a)};c.recordActionEvent=function(a,b){"object"===typeof b&&(a=g(a,b),a=JSON.stringify({call:"doTracking",
params:a,eventType:"action"}),f(a))};c.recordConversionEvent=function(a,b,e,h,k,l){"object"===typeof b&&(a=g(a,b,!1,!1,e,h,k,l),a=JSON.stringify({call:"doTracking",params:a,eventType:"conversion"}),f(a))};c.recordFeedbackEvent=function(a,b){"object"===typeof b&&(a=g(a,b),a=JSON.stringify({call:"doTracking",params:a,eventType:"feedback"}),f(a))};c.updateProfileBySession=function(a,b){"object"===typeof a&&(a=JSON.stringify({call:"updateProfile",params:g(!1,!1,a,b)}),f(a))};window.LeoObserverProxy=c}})();
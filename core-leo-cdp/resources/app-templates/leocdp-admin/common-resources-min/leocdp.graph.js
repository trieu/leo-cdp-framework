// Version: v_0.9.0_2026-02-25-12-58-33
'use strict';class JourneyFlowGraph{constructor(a,b={}){this.container=document.getElementById(a);if(!this.container)throw Error(`Container #${a} not found.`);this.config={minZoom:b.minZoom||.5,maxZoom:b.maxZoom||5,avgPageview:b.avgPageview||20,avgPurchase:b.avgPurchase||7,layout:b.layout||{name:"dagre",rankDir:"LR",fit:!0,directed:!0,padding:50,spacingFactor:1.9,nodeSep:60,rankSep:30}};this.cy=null}_getStyleSheet(){return cytoscape.stylesheet().selector("node").css({height:80,width:80,"background-fit":"cover",
"background-color":"#ffffff","background-image":"data(image)","border-opacity":1}).selector('node[type\x3d"touchpoint_3rdparty"]').style({shape:"ellipse","border-color":"#9E9E9E","border-width":3,"border-style":"dashed"}).selector('node[type\x3d"touchpoint_1stparty"]').style({shape:"hexagon","border-color":"#4CAF50","border-width":4,"border-style":"solid"}).selector('node[type\x3d"cdp_profile"]').style({shape:"round-rectangle",padding:"6px","border-color":"#F3A06D","border-width":4,"border-style":"solid"}).selector("edge").css({"curve-style":"unbundled-bezier",
width:4,"target-arrow-shape":"triangle","line-color":"#ffaaaa","target-arrow-color":"#ffaaaa"}).selector("edge[weight \x3e 0]").style({label:"data(weight)","background-color":"#61bffc","font-size":20,width:5,"line-color":"#9BB6FB","target-arrow-color":"#0048FF"}).selector(`edge[weight >= ${this.config.avgPageview}]`).style({"line-color":"#618CF9","target-arrow-color":"#0048FF",width:7}).selector(`edge[weight >= ${this.config.avgPurchase}]`).style({"line-color":"#F3A06D","target-arrow-color":"#F91805",
width:9}).selector("edge[weight \x3d 0]").style({"background-color":"#61bffc","font-size":20,"line-color":"#9BB6FB","target-arrow-color":"#0048FF"})}_initHtmlLabels(){this.cy.nodeHtmlLabel&&this.cy.nodeHtmlLabel([{query:"node",halign:"center",valign:"top",halignBox:"center",valignBox:"top",cssClass:"",tpl:a=>{const b=a.label?a.label:a.id.toUpperCase();let c="cy_node_default";"cdp_profile"===a.type?c="cy_node_profile":"touchpoint_1stparty"===a.type?c="cy_node_1stparty":"touchpoint_3rdparty"===a.type&&
(c="cy_node_3rdparty");return`<h4 class="${c}">${b}</h4>`}}])}render(a){this.cy=cytoscape({container:this.container,boxSelectionEnabled:!1,autounselectify:!0,minZoom:this.config.minZoom,maxZoom:this.config.maxZoom,style:this._getStyleSheet(),elements:a,layout:this.config.layout});this._initHtmlLabels();"function"===typeof initPanZoomController&&initPanZoomController(this.config.minZoom,this.config.maxZoom,this.cy);this.cy.fit(50)}};
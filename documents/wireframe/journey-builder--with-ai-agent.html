<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>LEO CDP - AI Lead Qualification Simulator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }

        .sidebar {
            background: #2c3e50;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .sidebar a {
            color: #fff;
            display: block;
            margin: 10px 0;
            text-decoration: none;
        }

        .content {
            padding: 20px;
            background: #fff;
            border-radius: 5px;
        }

        .flowchart {
            background: #fdfdfd;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 20px;
            min-height: 400px;
        }

        .score-label {
            font-size: 16px;
            font-weight: bold;
            color: #337ab7;
            margin-left: 10px;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3 sidebar">
                <h3>LEO CDP</h3>
                <a href="#">Dashboard</a>
                <a href="#">Lead Scoring</a>
                <a href="#">Segments</a>
                <a href="#">Audience</a>
                <a href="#">Reports</a>
                <a href="#">Settings</a>
            </div>

            <div class="col-sm-9">
                <div class="content">
                    <h2>AI Agent for Customer Conversion Rate Optimization (CRO) </h2>
                    <p>Adjust the digital signal scores below to see how the LEO AI Agent qualifies the lead.</p>

                    <div class="form-group">
                        <label for="behaviorScore">Website Visits (Behavior Score)</label>
                        <input type="range" class="form-control" id="behaviorScore" min="0" max="100" value="70">
                        <span id="behaviorScoreLabel" class="score-label">70</span>
                    </div>

                    <div class="form-group">
                        <label for="interestScore">Email Opens (Interest Score)</label>
                        <input type="range" class="form-control" id="interestScore" min="0" max="100" value="80">
                        <span id="interestScoreLabel" class="score-label">80</span>
                    </div>

                    <div class="form-group">
                        <label for="engagementScore">Social Clicks (Engagement Score)</label>
                        <input type="range" class="form-control" id="engagementScore" min="0" max="100" value="75">
                        <span id="engagementScoreLabel" class="score-label">75</span>
                    </div>

                    <button id="qualifyLead" class="btn btn-success">Run AI Agent</button>

                    <div class="flowchart">
                        <h4>Final Flow Diagram for CRO </h4>
                        <div class="mermaid" id="qualificationDiagram">
                            %% Diagram will be generated by the AI simulation below.
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"
        integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
        crossorigin="anonymous"></script>

    <script>
        // Function to update the diagram
        function generateDiagram() {
            const behavior = parseInt($('#behaviorScore').val());
            const interest = parseInt($('#interestScore').val());
            const engagement = parseInt($('#engagementScore').val());

            // Update score labels next to sliders
            $('#behaviorScoreLabel').text(behavior);
            $('#interestScoreLabel').text(interest);
            $('#engagementScoreLabel').text(engagement);

            // MODIFIED: Logic to simulate the ML Engine for lead qualification
            const totalScore = (behavior + interest + engagement);
            const avgScore = Math.round(totalScore / 3);

            let qualificationResult;
            let resultStyle;

            if (avgScore > 66) {
                qualificationResult = 'Sales Ready';
                resultStyle = 'style SalesReady fill:#d4edda,stroke:#155724,stroke-width:2px';
            } else if (avgScore > 33) {
                qualificationResult = 'Nurture Track';
                resultStyle = 'style NurtureTrack fill:#fff3cd,stroke:#856404,stroke-width:2px';
            } else {
                qualificationResult = 'Keep Warm';
                resultStyle = 'style KeepWarm fill:#f8d7da,stroke:#721c24,stroke-width:2px';
            }

            // MODIFIED: Mermaid diagram now visualizes the lead qualification flow
            const aiFlow = `
                graph LR
                    subgraph Digital_Signals["Digital Signals in LEO CDP"]
                        A[Website Visits] -->|Scan| B(Behavior Score: ${behavior})
                        C[Email Opens] -->|Review| D(Interest Score: ${interest})
                        E[Social Clicks] -->|Parse| F(Engagement Score: ${engagement})
                    end

                    subgraph LEO_AI_Agent["LEO AI Agent"]
                        Processor[Signal Processor] -->|Feed| Engine(ML Engine)
                        Engine --> Qualify{Lead Qualification?}
                        Qualify -- Strong Signals --> SalesReady(Sales Ready)
                        Qualify -- Medium Signals --> NurtureTrack(Nurture Track)
                        Qualify -- Weak Signals --> KeepWarm(Keep Warm)
                    end

                    %% Link left to right
                    B --> Processor
                    D --> Processor
                    F --> Processor

                    %% Style the final result
                    ${resultStyle}
            `;

            // Update mermaid diagram
            const diagramElement = document.getElementById('qualificationDiagram');
            diagramElement.innerHTML = aiFlow;
            diagramElement.removeAttribute('data-processed'); // Allow mermaid to re-render
            mermaid.run({
                nodes: [diagramElement]
            });
        }

        $(document).ready(function () {
            // Generate diagram on button click
            $('#qualifyLead').click(function () {
                generateDiagram();
            });

            // Also update diagram when sliders change for real-time feedback
            $('input[type="range"]').on('input', function () {
                generateDiagram();
            });

            // Initial diagram generation on page load
            generateDiagram();
        });
    </script>
</body>

</html>